@{
    ViewBag.Title = "Inbox";
    if (Request.Headers["X-PJAX"] == null)
    {
        Layout = "~/Views/Layouts/_User.cshtml";
        ViewBag.TitleTag = null;
    }
    else
    {
        ViewBag.TitleTag = "{{" + ViewBag.Title + "}}";
        Layout = null;
    } 
}

<h2>Inbox</h2>

@if (ViewBag.MailsCount == 0)
{
    <div class="question">
        <p>Er zijn geen mailtjes.</p>
    </div>
}
else
{   
    <div class="question">
    <span>@Html.ActionLink("Markeer alle als gelezen", "markeergelezen", "user")</span>
    @foreach (var mail in ViewBag.MailsIn)
    {
        <p>
            @if (mail.Viewed == 0)
            {
                <b>@Html.ActionLink((string)mail.Title, "viewmail", "user", new { id = mail.MessageID }, new { })</b>
            }
            else
            {
                @Html.ActionLink((string)mail.Title, "viewmail", "user", new { id = mail.MessageID }, new { })
            }
                <br /><span>van 
                @foreach (var user in ViewBag.UserList)
                {
                    if (user.UserID == mail.SenderId)
                    {
                        <span>@Html.ActionLink((string)user.UserName, "Index", "profiel", new { UserName = user.UserName }, "")</span>   
                    }
                }    
                verstuurd op @mail.Created_At</span>
            @Html.ActionLink("delete", "deletemail", "user", new { id = mail.MessageID }, "")
        </p>
    }
    </div>
}

