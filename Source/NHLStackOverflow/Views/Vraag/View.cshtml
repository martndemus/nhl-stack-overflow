@{
    ViewBag.Title = "Index";
    if (Request.Headers["X-PJAX"] == null) {
        Layout = "~/Views/Layouts/_Main.cshtml";
        ViewBag.TitleTag = null;
    } else {
        ViewBag.TitleTag = "{{" + ViewBag.Title + "}}";
        Layout = null;
    } 
}
@ViewBag.TitleTag

<h2>@ViewBag.QuestionDetail.Title</h2> 

<article class="question">
    @Html.Raw(ViewBag.QuestionDetail.Content)
    <aside class="q-meta">
        <p class="stats">
            <span title="Stemmen">
                <img src="../../Styles/check.png" alt="Stemmen"/>@ViewBag.QuestionDetail.Votes
            </span>
            <span title="Antwoorden">
                <img src="../../Styles/aplus.png" alt="Antwoorden"/>@ViewBag.QuestionDetail.Answers
            </span>
            <span title="Bekeken">
                <img src="../../Styles/seen.png" alt="Bekeken"/>@ViewBag.QuestionDetail.Views
            </span>
            <time>
                <b>@NHLStackOverflow.Classes.StringToDateTime.ConvertToUnixTimestamp(ViewBag.QuestionDetail.Created_At)</b> geleden
            </time>
            door
                <b>@Html.ActionLink((string)ViewBag.QuestionUser.UserName, "view", "user", new { id = ViewBag.QuestionUser.UserID }, new { target = "_blank" })</b>  
                
            
        </p>
        <p class="tags">
                @foreach (var tag in ViewBag.Helper)
                {
                    @Html.ActionLink((string)tag.Tag.Name, "search", "tags", new { id = tag.Tag.TagID }, new { target = "blank" })
                    @Environment.NewLine
                }
        </p>
    </aside>
    <ul class="comments">
        @foreach (var comment in ViewBag.CommentsList)
        {
            if (comment.QuestionId == ViewBag.QuestionDetail.QuestionID)
            {
                <li>
                    @comment.Content
                <time>
                    <b>@NHLStackOverflow.Classes.StringToDateTime.ConvertToUnixTimestamp(comment.Created_At)</b> geleden
                </time>
                door

                @foreach (var user in ViewBag.UserCommentList)
                {
                    if (user.UserID == comment.UserId)
                    {
                        <b>@Html.ActionLink((string)user.UserName, "view", "user", new { id = user.UserID }, new { target = "_blank" })</b>  
                        break;
                    }
                }
                </li>
            }
        }
        <li class="respond">
        @using (Html.BeginForm())
        {
            @Html.TextBox("questionComment", "", new { placeholder = "Reageer" });
        }
        </li>
    </ul>
</article>
@if (ViewBag.AnswerQuestionCounting == 1)
{
    <h2>Er is @ViewBag.AnswerQuestionCounting antwoord</h2>        
}
else
{  
    <h2>Er zijn @ViewBag.AnswerQuestionCounting antwoorden</h2>    
}

@foreach (var answer in ViewBag.AnswerQuestionList)
{
    <article class="question">
        <p>@answer.Content</p>
        <aside class="q-meta">
            <p class="stats">
                <span title="Stemmen">
                    <img src="../../Styles/check.png" alt="Stemmen" />@answer.Votes
                </span>
                <time>
                    <b>@NHLStackOverflow.Classes.StringToDateTime.ConvertToUnixTimestamp(answer.Created_At)</b> geleden
                </time>
                door
                @foreach (var usertje in ViewBag.UserAnswerList)
                {
                    if (usertje.UserID == answer.UserId)
                    {
                        <b>@Html.ActionLink((string)usertje.UserName, "view", "user", new { id = usertje.UserID}, new { target = "_blank"})</b>   
                        break;
                    }
                }
            </p>
        </aside>
         <ul class="comments">
            @foreach (var acomment in ViewBag.AnswerComments)
            {
                if (acomment.AnswerId == answer.AnswerID)
                {
                    <li>
                        @acomment.Content
                    <time>
                        <b>@NHLStackOverflow.Classes.StringToDateTime.ConvertToUnixTimestamp(acomment.Created_At)</b> geleden
                    </time>
                    door

                    @foreach (var user in ViewBag.qCommentList)
                    {
                        if (user.UserID == acomment.UserId)
                        {
                            <b>@Html.ActionLink((string)user.UserName, "view", "user", new { id = user.UserID }, new { target = "_blank" })</b>  
                            break;
                        }
                    }
                    </li>
                }
            }
        <li class="respond">
            @using (Html.BeginForm())
            {
                string aID = Convert.ToString(answer.AnswerID);
                @Html.TextBox("awnserComment", "", new { placeholder = "Reageer" });
                @Html.TextBox("awnserID", aID, new { type = "hidden" });
            }
        </li>
    </ul>
    </article>
}


@using (Html.BeginForm())
{
    @Html.TextBox("awnser", "", new { placeholder = "Schrijf een antwoord" });
}


